<%- include('partials/header') -%>
    <div class="d-flex justify-content-between">
        <div>
            <h2><%=listing[0].addressLine1%></h2>
            <h4><%=listing[0].city%> &#8226; <%=listing[0].province%> &#8226; <%=listing[0].zipcode%></h4>
        </div>
        <div>
            <h4 class="text-right">Availability: <strong><%=new Date(listing[0].availableFromTs).toDateString()%></strong> to <strong><%=new Date(listing[0].availableToTs).toDateString()%></strong></h4>
            <h4 class="text-right">Hourly Rate: $<%=listing[0].hourlyRate.toFixed(2)%></h4>
            <h5 class="text-right">Special Instructions: <%=listing[0].instructions%></h5>
        </div>
    </div>
    
    <!-- Slideshow container -->
<div class="listing-container">
    <div>
        <% if(listing.bookings.length > 0) {%>
            <div class="profile-data d-flex justify-content-between">
                <h3 class="">Booked Timings</h3>
                <a class="btn btn-primary" data-toggle="collapse" href=".profile-bookings" role="button" aria-expanded="false" aria-controls="collapseExample"><i class="fa-solid fa-caret-down"></i></a>
            </div>
            <%listing.bookings.forEach(booking => {%>
                <div class="collapse card card-body profile-bookings">
                    <div>
                        <strong>Total Price: $<%=booking.netAmount.toFixed(2)%></strong> <br>
                        Booked period: <strong><%=new Date(booking.fromTS).toDateString()%> : <%=new Date(booking.fromTS).toTimeString().slice(0,5)%></strong> to <strong><%=new Date(booking.toTS).toDateString()%> : <%=new Date(booking.toTS).toTimeString().slice(0,5)%></strong>
                    </div> 
                </div>
                
        <%})} else {%>
            <h3 class="">No bookings yet.!</h3>
        <%}%>
    </div>
    <div class="slideshow-container">

        <!-- Full-width images with number and caption text -->
        <%listing[0].images.forEach((image) => {%>
            <div class="mySlides fade">
                <img class="carousel-images" src="data:image/<%=image.contentType%>;base64,
                        <%=image.data.toString('base64')%>" alt="image for user">
            </div>
        <%})%>
        <!-- Next and previous buttons -->
        <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
        <a class="next" onclick="plusSlides(1)">&#10095;</a>
      </div>
      
        
</div>
    <script src="/js/carousel.js"></script>
<%- include('partials/footer') -%>
